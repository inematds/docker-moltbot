services:
  moltbot:
    build: .
    container_name: moltbot
    restart: unless-stopped
    env_file:
      - .env
    ports:
      - "127.0.0.1:18789:18789"  # Loopback only â€” never expose to 0.0.0.0
    volumes:
      - moltbot-data:/home/moltbot/.clawdbot  # clawdbot runtime uses ~/.clawdbot (will change to ~/.moltbot when moltbot is fully released)
      - moltbot-workspace:/home/moltbot/workspace
      - moltbot-logs:/home/moltbot/logs
    networks:
      - moltbot-net
    security_opt:
      - no-new-privileges:true
    read_only: false
    tmpfs:
      - /tmp:size=512M

networks:
  moltbot-net:
    driver: bridge
    internal: false  # Set to true for full network isolation (no internet)

volumes:
  moltbot-data:
  moltbot-workspace:
  moltbot-logs:
